<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="discord-application-id" content="1170773879162159144">
<title>ðŸŽ® Mini Mario Level 1</title>
<style>
  body { margin:0; overflow:hidden; background:#87ceeb; }
  canvas { display:block; }
  #score { position:absolute; top:10px; left:10px; color:white; font-family:Arial,sans-serif; font-size:18px; }
  #game-over { position:absolute; top:40%; left:50%; transform:translate(-50%, -50%); color:white; font-size:30px; text-align:center; display:none; }
  #game-over button { margin-top:20px; padding:10px 20px; font-size:16px; cursor:pointer; border:none; border-radius:10px; background-color:#27ae60; color:white; }
  #game-over button:hover { background-color:#2ecc71; }
</style>
</head>
<body>

<div id="score">Score : 0</div>
<div id="game-over">
  ðŸ’¥ GAME OVER ðŸ’¥<br>
  <button onclick="restartGame()">Rejouer</button>
</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let width = canvas.width = 800;
let height = canvas.height = 500;

// Joueur
let player = {x:50, y:400, width:30, height:40, color:'red', vy:0, jump:12, onGround:false};
let keys = {left:false, right:false, up:false};
let gravity = 0.6;
let score = 0;
let gameOver = false;

// Plateformes (niveau 1)
const platforms = [
  {x:0, y:460, width:800, height:40},  // sol
  {x:100, y:350, width:120, height:20},
  {x:300, y:280, width:120, height:20},
  {x:500, y:200, width:120, height:20},
  {x:650, y:130, width:120, height:20},
];

// PiÃ¨ces
let coins = [
  {x:130, y:310, width:15, height:15, collected:false},
  {x:330, y:240, width:15, height:15, collected:false},
  {x:680, y:90, width:15, height:15, collected:false},
];

// Ennemi simple
let enemy = {x:400, y:440, width:30, height:30, vx:2};

// ContrÃ´les
document.addEventListener('keydown', e=>{
  if(e.key==='ArrowLeft') keys.left=true;
  if(e.key==='ArrowRight') keys.right=true;
  if(e.key==='ArrowUp') keys.up=true;
});
document.addEventListener('keyup', e=>{
  if(e.key==='ArrowLeft') keys.left=false;
  if(e.key==='ArrowRight') keys.right=false;
  if(e.key==='ArrowUp') keys.up=false;
});

function gameLoop(){
  if(gameOver) return;

  // Fond
  ctx.fillStyle='#87ceeb';
  ctx.fillRect(0,0,width,height);

  // Mouvement joueur
  if(keys.left) player.x -= 6;
  if(keys.right) player.x += 6;

  // GravitÃ©
  player.vy += gravity;
  player.y += player.vy;

  // Collision plateformes
  player.onGround=false;
  platforms.forEach(p=>{
    if(player.x + player.width > p.x && player.x < p.x + p.width &&
       player.y + player.height > p.y && player.y + player.height < p.y + p.height + player.vy){
      player.y = p.y - player.height;
      player.vy = 0;
      player.onGround=true;
    }
  });

  // Saut
  if(keys.up && player.onGround){
    player.vy = -player.jump;
  }

  // Bord
  if(player.x<0) player.x=0;
  if(player.x+player.width>width) player.x=width-player.width;
  if(player.y>height) endGame();

  // Dessiner plateformes
  ctx.fillStyle='green';
  platforms.forEach(p=>ctx.fillRect(p.x,p.y,p.width,p.height));

  // Dessiner piÃ¨ces
  ctx.fillStyle='gold';
  coins.forEach(c=>{
    if(!c.collected) ctx.fillRect(c.x,c.y,c.width,c.height);
    if(!c.collected && player.x + player.width > c.x && player.x < c.x + c.width &&
       player.y + player.height > c.y && player.y < c.y + c.height){
      c.collected = true;
      score++;
      document.getElementById('score').textContent='Score : '+score;
    }
  });

  // Dessiner joueur
  ctx.fillStyle=player.color;
  ctx.fillRect(player.x,player.y,player.width,player.height);

  // Ennemi
  enemy.x += enemy.vx;
  if(enemy.x<0 || enemy.x+enemy.width>width) enemy.vx *= -1;
  ctx.fillStyle='purple';
  ctx.fillRect(enemy.x,enemy.y,enemy.width,enemy.height);

  // Collision avec ennemi
  if(player.x < enemy.x + enemy.width && player.x + player.width > enemy.x &&
     player.y < enemy.y + enemy.height && player.y + player.height > enemy.y){
    endGame();
  }

  requestAnimationFrame(gameLoop);
}
gameLoop();

function endGame(){
  gameOver=true;
  document.getElementById('game-over').style.display='block';
}

function restartGame(){
  player.x=50;
  player.y=400;
  player.vy=0;
  enemy.x=400;
  enemy.vx=2;
  coins.forEach(c=>c.collected=false);
  score=0; document.getElementById('score').textContent='Score : 0';
  gameOver=false;
  document.getElementById('game-over').style.display='none';
  gameLoop();
}
</script>
</body>
</html>
